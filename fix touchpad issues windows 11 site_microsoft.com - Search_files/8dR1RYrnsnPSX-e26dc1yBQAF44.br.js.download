(function(){function c(){var f=parseInt(n.getAttribute("data-min-rows"))|0,t,i,r,u;n.setAttribute("rows",f+"");i=parseInt(window.getComputedStyle(n,null).getPropertyValue("padding-top").split("px")[0])||10;r=parseInt(window.getComputedStyle(n,null).getPropertyValue("padding-bottom").split("px")[0])||10;d?(u=y?y.scrollHeight:n.scrollHeight,t=Math.max(1,Math.ceil((u-i-r)/w))):t=Math.max(1,Math.ceil((n.scrollHeight-i-r)/w));sj_evt.fire("SB.LineChange",{total_line:t});t>=2&&Log&&Log.Log&&Log.Log("MTL","Rows",t.toString(),!1);n.setAttribute("rows",t+"")}function r(){sb_st(c,0);nt&&g&&(ut(),g=!1)}function tt(){sb_st(l,0)}function it(){n.setAttribute("rows","1")}function rt(){sb_st(function(){n.value=n.value.replace(/[\r\n]+/g," ");c()},0)}function ut(){_w.performance&&_w.performance.mark&&performance.mark("SerpSB");var n=performance.getEntriesByName("SerpSB");n&&n[0]&&n[0].startTime&&Log&&Log.Log&&Log.Log("SerpSB","AS","PerfInst",!1,"LoadTime",n[0].startTime.toString())}function ft(t){var i;(p&&a||h)&&(v.innerText=n.value,p.innerText=t[1].suggestion?t[1].suggestion:"",t[1].suggestion?(a.classList.add("nudgeVisible"),v.ariaLabel="".concat(Mtl_Config.suggestionText).concat(n.value).concat(t[1].suggestion).concat(Mtl_Config.tabText)):(a.classList.remove("nudgeVisible"),v.ariaLabel=""),h&&(((i=t[1])===null||i===void 0?void 0:i.suggestion)?h.classList.add("tip-visible"):h.classList.remove("tip-visible")),d&&c())}function l(){var t,r=(t=n===null||n===void 0?void 0:n.getAttribute("maxlength"))!==null&&t!==void 0?t:"1000",i=n===null||n===void 0?void 0:n.value.length;s&&(s.innerText=i+"/"+r,i>=b&&Log&&Log.Log&&Log.Log("MTL","CharCount",b.toString(),!1),i>=k?(f(s,"b_hide"),o&&Mtl_Config&&Mtl_Config.hideToolbar&&f(o,"b_hide")):(u(s,"b_hide"),o&&Mtl_Config&&Mtl_Config.hideToolbar&&u(o,"b_hide")))}function et(n){sj_pd(n);sj_sp(n);e&&(u(e,"b_expanded"),t&&u(t,"b_hide"),i&&f(i,"b_hide"))}function ot(n){sj_pd(n);sj_sp(n);e&&(f(e,"b_expanded"),t&&f(t,"b_hide"),i&&u(i,"b_hide"))}var u=Lib.CssClass.add,f=Lib.CssClass.remove,st=Lib.CssClass.contains,n=_ge("sb_form_q"),e=_ge("b_header"),o=_ge("sb_toolbar"),s=_ge("sb_chcounter_r"),t=_ge("sb_expand_r"),i=_ge("sb_collapes_r"),y=_qs(".qfc"),p=_qs(".qfc.b_searchbox .ghost"),a=_qs(".qfc.b_searchbox .nudge"),v=_qs(".qfc.b_searchbox .user-prefix"),w=24,b=50,k=Mtl_Config&&typeof(Mtl_Config.showCharCountAfter=="number")?Mtl_Config.showCharCountAfter:0,d=Mtl_Config&&typeof(Mtl_Config.resizeWithGhosting=="boolean")?Mtl_Config.resizeWithGhosting:!1,nt=Mtl_Config&&typeof(Mtl_Config.logSearchBoxClickTime=="boolean")?Mtl_Config.logSearchBoxClickTime:!1,g=!0,h=_ge("sb_search_undo_redo_tip");n&&(sj_be(n,"change",c),sj_be(n,"cut",r),sj_be(n,"paste",rt),sj_be(n,"focus",r),sj_be(n,"input",r),sj_be(n,"keydown",r),sj_be(n,"touchstart",r),sj_be(n,"click",r),sj_evt.bind("clearCompleted",it),k>=0&&(sj_be(n,"focus",l),sj_be(n,"input",l),sj_be(n,"keydown",tt),sj_evt.bind("clearCompleted",l)),t&&sj_be(t,"click",et),i&&sj_be(i,"click",ot),sj_evt.bind("AS.Input.Update",ft),n.value!==n.textContent&&(n.value=n.textContent))})()